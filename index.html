<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Armaan's Odyssey</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=EB+Garamond:ital,wght@0,400;0,500;1,400;1,500&display=swap" rel="stylesheet" />

  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    /* ── Palette from image #2 ── */
    :root {
      --navy:    #2c3e55;   /* dark navy */
      --steel:   #6b8db5;   /* steel blue */
      --terra:   #c96045;   /* terracotta */
      --salmon:  #e8a090;   /* soft salmon */
      --silver:  #d3cfd8;   /* silver lavender */
      --bg:      #eae7ed;   /* page background */
      --shadow:  rgba(44, 62, 85, 0.22);
    }

    body {
      background-color: var(--bg);
      background-image:
        repeating-linear-gradient(0deg,  rgba(107,141,181,0.08) 0px, rgba(107,141,181,0.08) 1px, transparent 1px, transparent 70px),
        repeating-linear-gradient(90deg, rgba(107,141,181,0.08) 0px, rgba(107,141,181,0.08) 1px, transparent 1px, transparent 70px);
      font-family: 'EB Garamond', serif;
      color: var(--navy);
      min-height: 100vh;
    }

    /* ─── Header ─── */
    header {
      position: relative;
      z-index: 1;
      text-align: center;
      padding: 52px 24px 36px;
      background: linear-gradient(160deg, var(--navy) 0%, #3a506e 60%, #4a6080 100%);
      border-bottom: 3px solid var(--terra);
      box-shadow: 0 6px 32px rgba(44,62,85,0.4);
    }

    .header-ornament {
      font-size: 1rem;
      color: var(--salmon);
      letter-spacing: 10px;
      display: block;
      margin-bottom: 14px;
      opacity: 0.8;
    }

    h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(2.6rem, 6vw, 4.4rem);
      font-style: italic;
      font-weight: 600;
      color: #f0ece8;
      letter-spacing: 2px;
      line-height: 1.1;
      text-shadow: 0 2px 16px rgba(201,96,69,0.35);
    }

    .subtitle {
      margin-top: 12px;
      font-size: 0.82rem;
      letter-spacing: 6px;
      text-transform: uppercase;
      color: var(--steel);
    }

    .divider {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      margin: 18px auto 0;
      max-width: 340px;
      color: var(--terra);
    }
    .divider::before, .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--terra);
      opacity: 0.6;
    }

    .city-count {
      margin-top: 18px;
      font-style: italic;
      font-size: 1.05rem;
      color: var(--silver);
    }

    /* ─── Compass rose ─── */
    .compass-rose {
      margin: 20px auto 0;
      width: 52px;
      height: 52px;
      opacity: 0.7;
    }

    /* ─── Map wrapper ─── */
    .map-wrap {
      position: relative;
      z-index: 1;
      width: calc(100% - 60px);
      max-width: 1200px;
      margin: 36px auto 28px;
    }

    .map-frame {
      border: 3px solid var(--terra);
      box-shadow:
        0 0 0 5px var(--bg),
        0 0 0 7px var(--steel),
        0 12px 48px var(--shadow);
      border-radius: 3px;
      overflow: hidden;
    }

    #map {
      height: 68vh;
      min-height: 480px;
    }

    /* ─── Footer ─── */
    footer {
      position: relative;
      z-index: 1;
      text-align: center;
      padding: 28px 16px 44px;
      font-style: italic;
      font-size: 0.95rem;
      color: var(--silver);
      border-top: 3px solid var(--terra);
      background: linear-gradient(0deg, var(--navy) 0%, #3a506e 100%);
      box-shadow: 0 -4px 24px rgba(44,62,85,0.3);
    }

    footer .footer-ornament {
      display: block;
      font-size: 1rem;
      letter-spacing: 8px;
      color: var(--terra);
      margin-bottom: 8px;
    }

    /* ─── Leaflet popup ─── */
    .leaflet-popup-content-wrapper {
      background: #f8f5f2;
      border: 2px solid var(--steel);
      border-radius: 4px;
      box-shadow: 0 6px 28px var(--shadow);
      padding: 0;
    }

    .leaflet-popup-content {
      margin: 0;
      width: 260px !important;
    }

    .leaflet-popup-tip-container { margin-top: -1px; }
    .leaflet-popup-tip { background: var(--steel); }

    .leaflet-popup-close-button {
      color: var(--navy) !important;
      font-size: 18px !important;
      padding: 6px 8px !important;
    }

    /* ─── Popup card ─── */
    .popup-card {
      text-align: center;
      font-family: 'EB Garamond', serif;
      color: var(--navy);
      overflow: hidden;
      border-radius: 3px;
    }

    .popup-img-wrap {
      width: 100%;
      height: 160px;
      overflow: hidden;
      position: relative;
      background: var(--silver);
    }

    .popup-img-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transition: transform 0.4s ease;
    }

    .popup-img-wrap img:hover { transform: scale(1.04); }

    .popup-img-wrap .img-loader {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-style: italic;
      font-size: 0.85rem;
      color: var(--navy);
      opacity: 0.6;
    }

    .popup-body {
      padding: 14px 16px 16px;
      border-top: 2px solid var(--terra);
    }

    .popup-body h2 {
      font-family: 'Playfair Display', serif;
      font-size: 1.35rem;
      font-style: italic;
      color: var(--navy);
      margin-bottom: 2px;
    }

    .popup-body .popup-country {
      font-size: 0.78rem;
      letter-spacing: 3px;
      text-transform: uppercase;
      color: var(--steel);
      margin-bottom: 8px;
    }

    .popup-body .popup-attraction {
      font-size: 0.88rem;
      font-style: italic;
      color: var(--terra);
    }

    /* ─── Marker pin ─── */
    .map-pin {
      width: 20px;
      height: 20px;
      background: var(--terra);
      border: 3px solid var(--navy);
      border-radius: 50%;
      box-shadow: 0 2px 8px var(--shadow);
      cursor: pointer;
      transition: transform 0.15s ease, background 0.15s ease;
    }

    .map-pin:hover {
      transform: scale(1.35);
      background: var(--salmon);
    }
  </style>
</head>
<body>
  <header>
    <span class="header-ornament">✦ ✦ ✦</span>
    <h1>Armaan's Odyssey</h1>
    <p class="subtitle">A Journey Through Europe</p>
    <div class="divider">✦</div>
    <p class="city-count">Many more cities and countries to come!!</p>
    <svg class="compass-rose" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
      <g fill="none" stroke="#e8a090" stroke-width="1.2">
        <circle cx="50" cy="50" r="38"/>
        <circle cx="50" cy="50" r="28"/>
        <circle cx="50" cy="50" r="4" fill="#e8a090"/>
        <line x1="50" y1="12" x2="50" y2="88"/>
        <line x1="12" y1="50" x2="88" y2="50"/>
        <line x1="23" y1="23" x2="77" y2="77" stroke-width="0.7" opacity="0.5"/>
        <line x1="77" y1="23" x2="23" y2="77" stroke-width="0.7" opacity="0.5"/>
        <polygon points="50,12 46,28 50,24 54,28" fill="#e8a090"/>
        <polygon points="50,88 46,72 50,76 54,72" fill="#e8a090" opacity="0.7"/>
        <polygon points="88,50 72,46 76,50 72,54" fill="#e8a090" opacity="0.7"/>
        <polygon points="12,50 28,46 24,50 28,54" fill="#e8a090" opacity="0.7"/>
      </g>
      <text x="50" y="9"  text-anchor="middle" fill="#e8a090" font-size="7" font-family="serif">N</text>
      <text x="50" y="97" text-anchor="middle" fill="#e8a090" font-size="7" font-family="serif">S</text>
      <text x="96" y="53" text-anchor="middle" fill="#e8a090" font-size="7" font-family="serif">E</text>
      <text x="4"  y="53" text-anchor="middle" fill="#e8a090" font-size="7" font-family="serif">W</text>
    </svg>
  </header>

  <div class="map-wrap">
    <div class="map-frame">
      <div id="map"></div>
    </div>
  </div>

  <footer>
    <span class="footer-ornament">✦</span>
    Thank you Mom and Dad
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map('map', {
      center: [47.2, 10.5],
      zoom: 5,
      zoomControl: true,
      scrollWheelZoom: true
    });

    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community',
      maxZoom: 19
    }).addTo(map);

    const cities = [
      { name: 'Madrid',    country: 'Spain',       lat: 40.4168, lng: -3.7038, attraction: 'Royal Palace of Madrid',       wiki: 'Royal_Palace_of_Madrid' },
      { name: 'Valencia',  country: 'Spain',       lat: 39.4699, lng: -0.3763, attraction: 'City of Arts & Sciences',      wiki: 'Ciudad_de_las_Artes_y_las_Ciencias' },
      { name: 'Budapest',  country: 'Hungary',     lat: 47.4979, lng: 19.0402, attraction: 'Hungarian Parliament Building', wiki: 'Hungarian_Parliament_Building' },
      { name: 'Milan',     country: 'Italy',       lat: 45.4642, lng:  9.1900, attraction: 'Milan Cathedral (Duomo)',       wiki: 'Milan_Cathedral' },
      { name: 'Lake Como', country: 'Italy',       lat: 45.9940, lng:  9.2577, attraction: 'Lake Como',                    wiki: 'Lake_Como' },
      { name: 'Chiasso',   country: 'Switzerland', lat: 45.8418, lng:  9.0328, attraction: 'Chiasso',                      wiki: 'Chiasso' },
      { name: 'Zurich',    country: 'Switzerland', lat: 47.3769, lng:  8.5417, attraction: 'City & Lake Zürich',           wiki: 'Zürich' },
      { name: 'Vienna',    country: 'Austria',     lat: 48.2082, lng: 16.3738, attraction: 'Schönbrunn Palace',             wiki: 'Schönbrunn_Palace' }
    ];

    function makeIcon() {
      return L.divIcon({
        html: '<div class="map-pin"></div>',
        className: '',
        iconSize: [20, 20],
        iconAnchor: [10, 10],
        popupAnchor: [0, -14]
      });
    }

    function popupHTML(city, imgSrc) {
      return `
        <div class="popup-card">
          <div class="popup-img-wrap">
            <img src="${imgSrc}" alt="${city.attraction}" loading="lazy"
                 onerror="this.parentElement.innerHTML='<div class=\'img-loader\'>No photo available</div>'" />
          </div>
          <div class="popup-body">
            <h2>${city.name}</h2>
            <p class="popup-country">${city.country}</p>
            <p class="popup-attraction">${city.attraction}</p>
          </div>
        </div>`;
    }

    function fetchAndBind(city) {
      const marker = L.marker([city.lat, city.lng], { icon: makeIcon() }).addTo(map);
      const fallback = 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/480px-No_image_available.svg.png';

      /* Use the Wikipedia action API (pageimages) — more reliable than the REST summary */
      const apiUrl = `https://en.wikipedia.org/w/api.php?action=query&titles=${encodeURIComponent(city.wiki)}&prop=pageimages&format=json&pithumbsize=640&origin=*`;

      fetch(apiUrl)
        .then(r => r.json())
        .then(data => {
          const pages = data.query.pages;
          const page  = pages[Object.keys(pages)[0]];
          const img   = (page && page.thumbnail) ? page.thumbnail.source : fallback;
          marker.bindPopup(popupHTML(city, img), { maxWidth: 280 });
        })
        .catch(() => {
          marker.bindPopup(popupHTML(city, fallback), { maxWidth: 280 });
        });
    }

    cities.forEach(fetchAndBind);
  </script>
</body>
</html>
